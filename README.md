Реализация

В проекте применены паттерны:

- interpreter:
    https://rust-unofficial.github.io/patterns/patterns/behavioural/interpreter.html

- folder:
    https://rust-unofficial.github.io/patterns/patterns/creational/fold.html

- singleton:
    https://docs.rs/once_cell/latest/once_cell/

Библиотека реализует DSL для описания единиц измерения и их конвертации.
Парсер и токенизатор реализованы без исп-ия сторонних библиотек.

Реализована работа с двумя типами Statement:
- Conversation (конвертация ЕИ)
- Decomposition (декомпозиция ЕИ - т.е. приведение к базовым е.и)

Примеры конвертации ЕИ:

* "1 Па^2=>Н^2/м^4", 1.0
* "1 Па=>Н/м^2", 1.0
* "1 к_Па=>Н/м^2", 1000.0
* "1 к_Па^2=>Н^2/м^4", 1000000.0
* "1 к_Па^2/сут^3=>кг^2/м^2*с^7", 1.55045359574252e-9
* "1 к_Па^2/м_сут^3=>кг^2/м^2*с^7", 1.55045359574252
* "1 к_Па^2/см^3=>кг^2/м^5*с^4", 1e12
* "1 к_Па^2/с_м^3=>кг^2/м^5*с^4", 1e12
* "1 к_Па^2/км^2=>кг^2/м^4*с^4", 1.0
* "1 к_Па^2/к_м^2=>кг^2/м^4*с^4", 1.0
* "1 ч^2=>с^2", 1.296e7
* "1 сут^2=>с^2", 7.46496e9
* "1 сут=>с", 86400.0
* "1 мес30^2=>с^2", 6.94427904e12
* "1 км/ч=>м/с", 0.2777777778
* "1 сут^2/кгс^2=>с^6/кг^2*м^2", 77622233.2930381
* "1 кг/м^3=>м_г/д_м^3", 1000.0
* "1 кг/м^3=>м_г/дм^3", 1000.0
* "1 атм/м^2=>Па/д_м^2", 1.01325e3
* "1 атм/м^2=>Па/дм^2", 1.01325e3
* "1 атм=>Па", 1.01325e5
* "1 тс^3/В^2=>кг*А^2*м^-1", 9.431092984355795e11
* "1 акр^2=>м^4", 16377075.8596
* "1 кгс=>кг*м/с^2", 9.80665
* "1 кгс^3=>кг^3*м^3/с^6", 943.1092984356
* "1 сут^2/кгс^2=>с^6/кг^2*м^2", 77622233.2930381
* "1 акр^2/сут^3=>м^4/с^3", 2.5391851259e-8
* "1 акр^2/сут^2=>м^4/с^2", 2.1938559488e-3
* "1 м*кг*м*кг*м*кг*м*м=>м^5*кг^3", 1.0
* "1 кгс^2/кгс=>кгс", 1.0
* "1 кгс^2/кгс^-1=>кгс^3", 1.0

Примеры декомпозиции ЕИ:
* "Па/дм^2", "100.00000000 [кг^1 * м^-3 * с^-2]"
* "кг/см^-2", "0.00010000 [кг^1 * м^2]"
* "кг/с_м^-2", "0.00010000 [кг^1 * м^2]"
* "к_г/с_м^-2", "0.00010000 [кг^1 * м^2]"
* "к_г/см^-2", "0.00010000 [кг^1 * м^2]"
* "кг/д_дм^-2", "0.00010000 [кг^1 * м^2]"
* "к_г/д_дм^-2", "0.00010000 [кг^1 * м^2]"
* "м_т/д_дм^-2", "0.00010000 [кг^1 * м^2]"
* "м_т/см^-2", "0.00010000 [кг^1 * м^2]"
* "м_т/с_м^-2", "0.00010000 [кг^1 * м^2]"
* "кгс/с_м^2", "98066.50000000 [кг^1 * м^-1 * с^-2]"
* "ат", "98066.50000000 [кг^1 * м^-1 * с^-2]"

См. тесты(модуль main).

ToDo:
- использовать Antlr (грамматика, токенизация, лексер, парсер)

some proof of concept && clean room development:

<figure>
  <img
  src="/img/smath.png"
  alt="вычисления в SMath">
  <figcaption>проверки в пакете SMath Studio</figcaption>
</figure>

----

<figure>
  <img
  src="/img/synthetic.jpg"
  alt="синтетический тест">
  <figcaption>синтетический тест</figcaption>
</figure>

----

<figure>
  <img
  src="/img/um.jpg"
  alt="отладка">
  <figcaption>отладка</figcaption>
</figure>

----

<figure>
  <img
  src="/img/um2.jpg"
  alt="композиция классов">
  <figcaption>композиция классов, абстрактное синтаксическое дерево(AST)</figcaption>
</figure>

----